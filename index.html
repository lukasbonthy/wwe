<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Selah (Sanctuary)</title>
  <meta name="theme-color" content="#0b0b12" />

  <!-- External CSS: Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- External CSS: Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@500;700;800;900&display=swap" rel="stylesheet">

  <!-- Tailwind theme config -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ["Manrope", "system-ui", "sans-serif"] },
          colors: {
            selah: {
              bg0: "#0b0b12",
              bg1: "#0f0f1a",
              rail: "#0a0a12",
              chan: "#101026",
              chat: "#0b0b12",
              mem:  "#10101c",
              stroke: "rgba(255,255,255,.10)",
              text: "rgba(255,255,255,.92)",
              muted: "rgba(255,255,255,.62)",
              muted2:"rgba(255,255,255,.44)",
              pink: "#ff3db8",
              purple:"#b38cff",
              aqua: "#7ae7ff"
            }
          },
          boxShadow: {
            glow: "0 0 24px rgba(255,61,184,.22)",
            deep: "0 18px 70px rgba(0,0,0,.45)"
          }
        }
      }
    }
  </script>

  <link rel="stylesheet" href="./styles.css" />
  <script defer src="./app.js"></script>
</head>

<body class="h-full overflow-hidden bg-gradient-to-b from-selah-bg0 to-selah-bg1 text-selah-text font-sans">

  <!-- Ambient background -->
  <div class="bgfx" aria-hidden="true">
    <div class="blob blob-a"></div>
    <div class="blob blob-b"></div>
    <div class="blob blob-c"></div>
    <div class="noise"></div>
  </div>

  <!-- Mobile topbar -->
  <header class="md:hidden h-14 px-3 flex items-center justify-between border-b border-[color:var(--stroke)] bg-[rgba(10,10,18,.78)] backdrop-blur">
    <button id="mOpenNav" class="iconbtn" aria-label="Open servers/channels">
      <i class="bi bi-layout-sidebar-inset"></i>
    </button>

    <div class="min-w-0 text-center">
      <div id="mServerName" class="font-black text-sm truncate">Selah</div>
      <div id="mChannelName" class="font-extrabold text-xs text-[color:var(--muted)] truncate"># select-a-channel</div>
    </div>

    <button id="mOpenMembers" class="iconbtn" aria-label="Open members">
      <i class="bi bi-people"></i>
    </button>
  </header>

  <!-- App grid -->
  <div class="appgrid">
    <!-- Server Rail -->
    <aside class="rail hidden md:flex">
      <div class="railTop">
        <button class="srvBtn srvBtnActive" data-home title="Selah Home">
          <span class="srvMark">S</span>
        </button>
      </div>

      <div id="serverRail" class="railList"></div>

      <div class="railBot">
        <button id="btnAddServer" class="srvBtn srvBtnGhost" title="Add server (demo)">
          <i class="bi bi-plus-lg"></i>
        </button>
        <button id="btnResetAll" class="srvBtn srvBtnGhost" title="Reset local data">
          <i class="bi bi-arrow-counterclockwise"></i>
        </button>
      </div>
    </aside>

    <!-- Channels -->
    <aside class="channels hidden md:flex">
      <div class="chanHead">
        <div class="min-w-0">
          <div id="serverTitle" class="font-black text-sm tracking-tight truncate">Selah (Sanctuary)</div>
          <div class="text-xs font-extrabold text-[color:var(--muted)] truncate">night calls â€¢ prayer â€¢ christian talk</div>
        </div>
        <div class="flex items-center gap-2">
          <button id="btnInvite" class="miniIcon" title="Invite (demo)"><i class="bi bi-share"></i></button>
          <button id="btnNewChannel" class="miniIcon" title="Create channel"><i class="bi bi-plus-lg"></i></button>
        </div>
      </div>

      <div class="chanSearch">
        <i class="bi bi-search"></i>
        <input id="chanSearch" placeholder="Find a channelâ€¦" />
      </div>

      <div id="chanTree" class="chanTree"></div>

      <!-- Voice / status bar (Discord-ish) -->
      <div class="statusBar">
        <div class="flex items-center gap-2 min-w-0">
          <div id="meAvatar" class="avatar">?</div>
          <div class="min-w-0">
            <div id="meName" class="font-black text-xs truncate">Guest</div>
            <div id="meStatus" class="text-[11px] font-extrabold text-[color:var(--muted)] truncate">Not connected</div>
          </div>
        </div>
        <div class="flex items-center gap-2">
          <button id="btnConnect" class="miniIcon glow" title="Connect"><i class="bi bi-plug"></i></button>
          <button id="btnRules" class="miniIcon" title="Rules"><i class="bi bi-shield-check"></i></button>
        </div>
      </div>
    </aside>

    <!-- Chat -->
    <main class="chat">
      <div class="chatHead">
        <div class="min-w-0">
          <div class="flex items-center gap-2 min-w-0">
            <span id="chanIcon" class="text-[color:var(--muted)] font-black">#</span>
            <div id="activeChanName" class="font-black truncate">select-a-channel</div>
            <span id="pillState" class="pill">Preview</span>
            <span id="pillLock" class="pill pillGhost hidden">Locked</span>
          </div>
          <div id="activeChanTopic" class="topic">Pick a channel on the left.</div>
        </div>

        <div class="flex items-center gap-2 flex-wrap justify-end">
          <button id="btnJoin" class="btnPrimary" disabled><i class="bi bi-box-arrow-in-right"></i> Join</button>
          <button id="btnBottom" class="btnGhost" title="Bottom"><i class="bi bi-arrow-down"></i></button>
          <button id="btnCommands" class="btnGhost" title="Commands"><i class="bi bi-terminal"></i></button>
        </div>
      </div>

      <div id="banner" class="banner hidden">
        <div class="min-w-0">
          <div class="font-black flex items-center gap-2"><i class="bi bi-eye"></i> Preview mode</div>
          <div class="text-xs font-extrabold text-[color:var(--muted)] truncate">Join to chat. Voice channels are UI-only until you add backend/WebRTC.</div>
        </div>
        <button id="btnJoinBanner" class="btnPrimary btnSmall">Join</button>
      </div>

      <div id="msgList" class="msgList"></div>

      <div class="composer">
        <div class="compLeft">
          <div class="label">Display name</div>
          <input id="displayName" class="field" maxlength="20" placeholder="ex: Lukas" />
          <div class="hintTiny">Connect first, then join channels.</div>
        </div>

        <div class="compMid">
          <textarea id="msgInput" rows="1" class="field fieldArea" placeholder="Connect + join to send messagesâ€¦" disabled></textarea>
          <div class="cmdHints">
            <span class="kbd">/amen</span>
            <span class="kbd">/prayer</span>
            <span class="kbd">/verse</span>
            <span class="kbd">/peace</span>
            <span class="kbd">/clear</span>
          </div>
        </div>

        <div class="compRight">
          <button id="btnSend" class="btnPrimary w-full" disabled><i class="bi bi-send"></i> Send</button>
          <button id="btnClear" class="btnGhost w-full"><i class="bi bi-trash"></i> Clear</button>
        </div>
      </div>
    </main>

    <!-- Members -->
    <aside class="members hidden md:flex">
      <div class="memHead">
        <div class="font-black flex items-center gap-2"><i class="bi bi-people"></i> Members</div>
        <div id="memCount" class="text-xs font-extrabold text-[color:var(--muted)]">â€”</div>
      </div>

      <div id="memList" class="memList"></div>

      <div class="memFoot">
        <div class="ruleCard">
          <div class="font-black">Rules</div>
          <ul class="ruleList">
            <li>Be kind + Christlike. No drama.</li>
            <li>Keep it clean. No sexual content.</li>
            <li>No hate/harassment/threats.</li>
            <li>No private info / doxxing.</li>
            <li>Prayer requests stay private.</li>
          </ul>
          <div class="flex gap-2 mt-2">
            <button id="btnCopyRules" class="btnGhost btnSmall w-full"><i class="bi bi-copy"></i> Copy</button>
            <button id="btnReport" class="btnGhost btnSmall w-full"><i class="bi bi-flag"></i> Report</button>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <!-- Mobile slide panels -->
  <div id="mBackdrop" class="mBackdrop hidden"></div>

  <section id="mNav" class="mPanel hidden" aria-hidden="true">
    <div class="mPanelHead">
      <div class="font-black flex items-center gap-2"><i class="bi bi-layout-sidebar-inset"></i> Selah</div>
      <button id="mCloseNav" class="iconbtn" aria-label="Close"><i class="bi bi-x-lg"></i></button>
    </div>

    <div class="mBlock">
      <div class="mLabel">Servers</div>
      <div id="mServers" class="mServers"></div>
    </div>

    <div class="mBlock">
      <div class="mLabel">Channels</div>
      <div class="chanSearch">
        <i class="bi bi-search"></i>
        <input id="chanSearchM" placeholder="Find a channelâ€¦" />
      </div>
      <div id="chanTreeM" class="chanTree"></div>
      <div class="flex gap-2 mt-3">
        <button id="btnNewChannelM" class="btnPrimary w-full"><i class="bi bi-plus-lg"></i> Create</button>
        <button id="btnConnectM" class="btnGhost w-full"><i class="bi bi-plug"></i> Connect</button>
      </div>
    </div>
  </section>

  <section id="mMembers" class="mPanelRight hidden" aria-hidden="true">
    <div class="mPanelHead">
      <div class="font-black flex items-center gap-2"><i class="bi bi-people"></i> Members</div>
      <button id="mCloseMembers" class="iconbtn" aria-label="Close"><i class="bi bi-x-lg"></i></button>
    </div>
    <div id="memListM" class="memList p-3"></div>
  </section>

  <!-- Create Channel Modal -->
  <div id="modal" class="modal hidden" aria-hidden="true">
    <div class="modalCard">
      <div class="flex items-center justify-between">
        <div class="font-black text-base">Create channel</div>
        <button id="modalClose" class="miniIcon" aria-label="Close"><i class="bi bi-x-lg"></i></button>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-3">
        <div>
          <div class="label">Name</div>
          <input id="newName" class="field" maxlength="28" placeholder="ex: prayer-requests" />
        </div>
        <div>
          <div class="label">Type</div>
          <select id="newType" class="field">
            <option value="text">Text (#)</option>
            <option value="voice">Voice (ðŸ”Š)</option>
          </select>
        </div>
      </div>

      <div class="mt-3">
        <div class="label">Topic</div>
        <textarea id="newTopic" rows="3" class="field fieldArea" maxlength="140" placeholder="Whatâ€™s this channel for?"></textarea>
      </div>

      <div class="mt-3 grid grid-cols-1 sm:grid-cols-2 gap-3 items-center">
        <div>
          <div class="label">Optional passcode</div>
          <input id="newPass" class="field" maxlength="12" placeholder="blank = public" />
        </div>
        <div class="text-xs font-extrabold text-[color:var(--muted)]">
          Locked channels ask for passcode when joining.
        </div>
      </div>

      <div class="mt-4 flex gap-2 justify-end">
        <button id="modalCancel" class="btnGhost"><i class="bi bi-x-circle"></i> Cancel</button>
        <button id="modalCreate" class="btnPrimary"><i class="bi bi-check2"></i> Create</button>
      </div>
    </div>
  </div>

  <!-- Commands Modal -->
  <div id="cmdModal" class="modal hidden" aria-hidden="true">
    <div class="modalCard">
      <div class="flex items-center justify-between">
        <div class="font-black text-base">Commands</div>
        <button id="cmdClose" class="miniIcon" aria-label="Close"><i class="bi bi-x-lg"></i></button>
      </div>
      <div class="mt-3 cardish">
        <div class="font-black">Chat</div>
        <div class="mt-2 flex flex-wrap gap-2">
          <span class="kbd">/amen</span>
          <span class="kbd">/peace</span>
          <span class="kbd">/verse</span>
          <span class="kbd">/prayer your request</span>
          <span class="kbd">/clear</span>
        </div>
        <div class="mt-2 text-xs font-extrabold text-[color:var(--muted)]">
          Front-end demo: saved in localStorage.
        </div>
      </div>
      <div class="mt-3 cardish">
        <div class="font-black">Voice channels</div>
        <div class="mt-2 text-xs font-extrabold text-[color:var(--muted)]">
          This build is UI-only. Real sleep calls need WebRTC/backend.
        </div>
      </div>
      <div class="mt-4 flex justify-end">
        <button id="cmdOk" class="btnPrimary"><i class="bi bi-check2"></i> Ok</button>
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

</body>
        </html>
